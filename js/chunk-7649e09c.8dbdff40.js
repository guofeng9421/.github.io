(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7649e09c"],{1703:function(t,e,a){"use strict";a("a446")},"1d33":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("el-button",{staticClass:"BrandAdded",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.uptradMark}},[t._v("添加")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.lint}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center"}}),a("el-table-column",{attrs:{prop:"tmName",label:"品牌名称"}}),a("el-table-column",{attrs:{label:"品牌LOGO"},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row,r=t.$index;return[a("img",{key:r,staticClass:"logoUrlImg",attrs:{src:e.logoUrl,alt:""}})]}}])}),a("el-table-column",{attrs:{prop:"prop",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(e){return t.reviseTradMark(r)}}},[t._v("修改")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.deleteTradMark(r)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{staticClass:"pagin",attrs:{"page-sizes":[3,5,10],"current-page":t.page,"page-size":t.limit,layout:" prev, pager, next, jumper,-> ,total, sizes",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.getPageLint}}),a("el-dialog",{attrs:{title:"收货地址",visible:t.tradeMarkVisible},on:{"update:visible":function(e){t.tradeMarkVisible=e}}},[a("el-form",{ref:"ruleForm",staticClass:"upDataMark",attrs:{model:t.tradeMarkData,rules:t.rulesTradeMark}},[a("el-form-item",{attrs:{label:"品牌名称","label-width":"100px",prop:"tmName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.tradeMarkData.tmName,callback:function(e){t.$set(t.tradeMarkData,"tmName",e)},expression:"tradeMarkData.tmName"}})],1),a("el-form-item",{attrs:{label:"品牌LOGO","label-width":"100px",prop:"logoUrl"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"dev-api/admin/product/upload","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.tradeMarkData.logoUrl?a("el-image",{staticClass:"avatar",staticStyle:{width:"100px",height:"100px"},attrs:{src:t.tradeMarkData.logoUrl,fit:"fit"}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg文件，且不超过500kb")])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.tradeMarkVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addOrUpdatMark}},[t._v("确 定")])],1)],1)],1)},s=[],i=a("5530"),n=a("c7eb"),l=a("1da1"),o={name:"TradeMark",components:{},data:function(){return{page:1,limit:3,total:0,lint:[],tradeMarkVisible:!1,imageUrl:"",tradeMarkData:{tmName:"",logoUrl:""},rulesTradeMark:{tmName:[{required:!0,message:"请输入品牌名称",trigger:"blur"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"}],logoUrl:[{required:!0,message:"请上传品牌LOGO",trigger:"blur"}]}}},computed:{},watch:{},created:function(){},mounted:function(){this.getPageLint()},methods:{getPageLint:function(){var t=arguments,e=this;return Object(l["a"])(Object(n["a"])().mark((function a(){var r,s,i,l;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.length>0&&void 0!==t[0]?t[0]:1,e.page=r,s=e.page,i=e.limit,a.next=5,e.$API.tradeMark.reqTradeMarkLint(s,i);case 5:l=a.sent,200===l.code&&(e.lint=l.data.records,e.total=l.data.total);case 7:case"end":return a.stop()}}),a)})))()},handleSizeChange:function(t){this.limit=t,this.getPageLint()},uptradMark:function(){this.tradeMarkVisible=!0,this.tradeMarkData={tmName:"",logoUrl:""}},reviseTradMark:function(t){this.tradeMarkVisible=!0,this.tradeMarkData=Object(i["a"])({},t)},handleAvatarSuccess:function(t,e){200===e.response.code?(this.tradeMarkData.logoUrl=e.response.data,this.$message({message:e.response.message,type:"success",duration:"3000"})):this.$message.error(e.response.message)},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&a},addOrUpdatMark:function(){var t=this;this.$refs["ruleForm"].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.tradeMarkVisible=!1,t.$API.tradeMark.reqAddOrUpdataTradeMark(t.tradeMarkData).then((function(e){200===e.code&&(t.$message({message:t.tradeMarkData.id?"修改品牌成功":"添加品牌成功",type:"success"}),t.getPageLint(t.tradeMarkData.id?t.page:1))})).catch((function(e){t.$message.error(e)}))}))},deleteTradMark:function(t){var e=this;this.$confirm("你确认删除".concat(t.tmName,",?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(l["a"])(Object(n["a"])().mark((function a(){var r;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$API.tradeMark.reqDeleteTradeMark(t.id);case 2:r=a.sent,200===r.code&&(e.$message({type:"success",message:"删除成功!"}),e.getPageLint(e.lint.length>1?e.page:e.page-1));case 4:case"end":return a.stop()}}),a)})))).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}}},c=o,d=(a("1703"),a("e5c7"),a("2877")),u=Object(d["a"])(c,r,s,!1,null,"b3f1adc6",null);e["default"]=u.exports},a446:function(t,e,a){},d4cd:function(t,e,a){},e5c7:function(t,e,a){"use strict";a("d4cd")}}]);